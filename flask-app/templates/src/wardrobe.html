<!DOCTYPE html>
<html>
<head>
    <title>Product Name - My Wardrobe</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>

    <div class="menu-board">
        <nav>
            <ul>
                <li> 
                    <a href="{{ url_for('index')}}">Home</a>
                </li>
                <li> 
                    <a href="{{ url_for('wardrobe')}}">My Wardrobe</a>
                </li>
                <li> 
                    <a href="outfits.html">My Outfits</a>
                </li>
            </ul>
        </nav>
    </div>

    <div class="content-container">

        <h2>Add Items to Wardrobe</h2>

        <form id = "uploadForm" class="input-area" name = "uploadForm">
            <button type = "submit" id="uploadButton" name = "uploadButton">Upload Items</button>
            <label for="clothing-file" style="font-weight: bold;" >Choose image(s) to add:</label>
            <input type="file" id="clothing-file" accept="image/*" name = "clothing-file" multiple>
        </form>

        <h3>Your Items:</h3>
        <div id="previewContainer" style="display: flex; flex-wrap: wrap; gap: 20px;">

                {% for item in imgs %}
                    <img src = " {{item.img_path}} ">
                {% endfor %}
        </div>

    </div>

<script>
// ... (The JavaScript code remains the same, but it's not shown here for brevity) ...
let allItems = [];
let allTags = [];

function handleFileUpload(event) {
    event.preventDefault(); 
    const fileInput = document.getElementById('clothing-file');
    const newImages = fileInput.files;

    if (newImages.length === 0) return;

    for (let i = 0; i < newImages.length; i++) {
        const file = newImages[i];
        const tag = prompt(`Enter a tag for the image: ${file.name}`, 'casual');
        
        if (tag === null) 
            continue;

        const cleanTag = tag.trim() || 'No Tag';

        allItems.push({
            file: file,
            tag: cleanTag
        });

        allTags.push(cleanTag);
    }
    
    fileInput.value = '';

    redrawPreviews();
}

function redrawPreviews() {
    const previewContainer = document.getElementById("previewContainer");
    
    previewContainer.innerHTML = ''; 

    allItems.forEach(item => {
        const file = item.file;
        const tag = item.tag;

        const itemWrapper = document.createElement('div');
        itemWrapper.style.textAlign = 'center';
        
        const reader = new FileReader();
        reader.onload = function(e) {
            const newImage = document.createElement('img');
            newImage.src = e.target.result;
            newImage.width = 150; /* Reduced image size for a cleaner look */
            newImage.height = 150;
            newImage.style.objectFit = 'cover'; /* Ensures images fill the space nicely */
            newImage.style.display = 'block';
            newImage.className = 'clothing-preview';

            const tagElement = document.createElement('span');
            tagElement.innerText = "Tag: " + tag;
            tagElement.style.fontWeight = 'bold';
            tagElement.style.display = 'block';
            tagElement.style.marginTop = '5px'; /* Space between image and tag */

            itemWrapper.appendChild(newImage);
            itemWrapper.appendChild(tagElement);
            
            previewContainer.appendChild(itemWrapper);
        }

        reader.readAsDataURL(file);
    });
}
document.getElementById('uploadForm').addEventListener('submit', handleFileUpload);
</script>

</body>
</html>